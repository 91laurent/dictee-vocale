<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dictée Vocale - Téléchargement</title>
    <meta name="theme-color" content="#3b82f6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #60a5fa 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        .step-number {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-weight: bold;
            font-size: 14px;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen flex items-center justify-center p-4">

    <div class="max-w-2xl w-full">
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="inline-flex items-center justify-center w-20 h-20 bg-white rounded-2xl shadow-lg mb-6">
                <i class="fa-solid fa-microphone-lines text-4xl text-blue-600"></i>
            </div>
            <h1 class="text-4xl font-bold text-white mb-3">Dictée Vocale</h1>
            <p class="text-blue-100 text-lg">Transformez votre voix en texte instantanément</p>
        </div>

        <!-- Carte principale -->
        <div class="bg-white rounded-2xl shadow-2xl p-8 card-hover">

            <!-- Plateforme détectée -->
            <div class="text-center mb-6">
                <p class="text-sm text-slate-500 mb-2">Plateforme détectée</p>
                <div id="platform-badge" class="inline-flex items-center gap-2 px-4 py-2 bg-slate-100 rounded-full">
                    <i id="platform-icon" class="fa-solid fa-computer text-slate-600"></i>
                    <span id="platform-name" class="font-medium text-slate-700">Détection...</span>
                </div>
            </div>

            <!-- Choix de version -->
            <div class="mb-8">
                <h2 class="text-lg font-bold text-slate-800 mb-4 text-center">Choisissez votre version</h2>

                <!-- Version Web -->
                <div class="mb-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border-2 border-blue-200 hover:border-blue-400 transition-all">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0">
                            <div class="w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center">
                                <i class="fa-solid fa-globe text-white text-xl"></i>
                            </div>
                        </div>
                        <div class="flex-grow">
                            <h3 class="font-bold text-slate-800 mb-1">Version Web (PWA)</h3>
                            <p class="text-sm text-slate-600 mb-3">Fonctionne sur tous les appareils (mobile, tablette, ordinateur)</p>
                            <a href="index.html" class="inline-flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-medium text-sm">
                                <i class="fa-solid fa-rocket"></i>
                                <span>Lancer l'app web</span>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Version Desktop Windows -->
                <div id="windows-version" class="hidden p-4 bg-gradient-to-r from-slate-50 to-gray-50 rounded-xl border-2 border-slate-200 hover:border-slate-400 transition-all">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0">
                            <div class="w-12 h-12 bg-slate-700 rounded-lg flex items-center justify-center">
                                <i class="fa-brands fa-windows text-white text-xl"></i>
                            </div>
                        </div>
                        <div class="flex-grow">
                            <h3 class="font-bold text-slate-800 mb-1">Version Desktop Windows</h3>
                            <p class="text-sm text-slate-600 mb-2">Application native avec collage automatique</p>
                            <ul class="text-xs text-slate-500 mb-3 space-y-1">
                                <li>✅ Raccourci global <kbd class="px-1 py-0.5 bg-white rounded border">Ctrl+Shift+D</kbd></li>
                                <li>✅ Collage automatique du texte dicté</li>
                                <li>✅ Fonctionne en arrière-plan</li>
                            </ul>
                            <a href="https://github.com/91laurent/dictee-vocale/releases/latest/download/SpeechToPaste.exe" class="inline-flex items-center gap-2 px-6 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-800 transition-all font-medium text-sm">
                                <i class="fa-solid fa-download"></i>
                                <span>Télécharger .exe</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Instructions d'installation PWA -->
            <div id="install-instructions" class="mt-6 p-5 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-100">
                <h3 class="font-bold text-slate-800 mb-4 flex items-center gap-2">
                    <i class="fa-solid fa-download text-blue-600"></i>
                    Installer comme une application
                </h3>

                <!-- Instructions Desktop (Chrome/Edge) -->
                <div id="instructions-desktop" class="hidden">
                    <div class="space-y-3 text-sm">
                        <div class="flex items-start gap-3">
                            <span class="step-number bg-blue-600 text-white shrink-0">1</span>
                            <p class="text-slate-600">Cliquez sur <strong>"Lancer l'application"</strong> ci-dessus</p>
                        </div>
                        <div class="flex items-start gap-3">
                            <span class="step-number bg-blue-600 text-white shrink-0">2</span>
                            <p class="text-slate-600">Dans la barre d'adresse, cliquez sur l'icône <i class="fa-solid fa-download text-blue-600"></i> ou <i class="fa-solid fa-plus-square text-blue-600"></i></p>
                        </div>
                        <div class="flex items-start gap-3">
                            <span class="step-number bg-blue-600 text-white shrink-0">3</span>
                            <p class="text-slate-600">Cliquez sur <strong>"Installer"</strong> - une icône apparaîtra sur votre bureau</p>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-white rounded-lg flex items-center gap-3">
                        <i class="fa-solid fa-lightbulb text-yellow-500"></i>
                        <p class="text-xs text-slate-500">L'app s'ouvrira dans sa propre fenêtre, comme un vrai logiciel !</p>
                    </div>
                </div>

                <!-- Instructions iOS -->
                <div id="instructions-ios" class="hidden">
                    <div class="space-y-3 text-sm">
                        <div class="flex items-start gap-3">
                            <span class="step-number bg-blue-600 text-white shrink-0">1</span>
                            <p class="text-slate-600">Cliquez sur <strong>"Lancer l'application"</strong> ci-dessus</p>
                        </div>
                        <div class="flex items-start gap-3">
                            <span class="step-number bg-blue-600 text-white shrink-0">2</span>
                            <p class="text-slate-600">Appuyez sur le bouton <strong>Partager</strong> <i class="fa-solid fa-arrow-up-from-bracket text-blue-600"></i> en bas de Safari</p>
                        </div>
                        <div class="flex items-start gap-3">
                            <span class="step-number bg-blue-600 text-white shrink-0">3</span>
                            <p class="text-slate-600">Faites défiler et appuyez sur <strong>"Sur l'écran d'accueil"</strong> <i class="fa-solid fa-plus-square text-blue-600"></i></p>
                        </div>
                        <div class="flex items-start gap-3">
                            <span class="step-number bg-blue-600 text-white shrink-0">4</span>
                            <p class="text-slate-600">Appuyez sur <strong>"Ajouter"</strong> en haut à droite</p>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-white rounded-lg flex items-center gap-3">
                        <i class="fa-brands fa-safari text-blue-500"></i>
                        <p class="text-xs text-slate-500">Utilisez Safari pour cette manipulation (ne fonctionne pas avec Chrome sur iOS)</p>
                    </div>
                </div>

                <!-- Instructions Android -->
                <div id="instructions-android" class="hidden">
                    <div class="space-y-3 text-sm">
                        <div class="flex items-start gap-3">
                            <span class="step-number bg-blue-600 text-white shrink-0">1</span>
                            <p class="text-slate-600">Cliquez sur <strong>"Lancer l'application"</strong> ci-dessus</p>
                        </div>
                        <div class="flex items-start gap-3">
                            <span class="step-number bg-blue-600 text-white shrink-0">2</span>
                            <p class="text-slate-600">Appuyez sur le menu <i class="fa-solid fa-ellipsis-vertical text-blue-600"></i> (3 points en haut à droite)</p>
                        </div>
                        <div class="flex items-start gap-3">
                            <span class="step-number bg-blue-600 text-white shrink-0">3</span>
                            <p class="text-slate-600">Appuyez sur <strong>"Installer l'application"</strong> ou <strong>"Ajouter à l'écran d'accueil"</strong></p>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-white rounded-lg flex items-center gap-3">
                        <i class="fa-brands fa-chrome text-green-500"></i>
                        <p class="text-xs text-slate-500">Fonctionne avec Chrome, Edge ou Samsung Internet</p>
                    </div>
                </div>

                <!-- Instructions Mac Safari -->
                <div id="instructions-mac" class="hidden">
                    <div class="space-y-3 text-sm">
                        <div class="flex items-start gap-3">
                            <span class="step-number bg-blue-600 text-white shrink-0">1</span>
                            <p class="text-slate-600">Cliquez sur <strong>"Lancer l'application"</strong> ci-dessus</p>
                        </div>
                        <div class="flex items-start gap-3">
                            <span class="step-number bg-blue-600 text-white shrink-0">2</span>
                            <p class="text-slate-600"><strong>Safari :</strong> Menu Fichier → "Ajouter au Dock"</p>
                        </div>
                        <div class="flex items-start gap-3">
                            <span class="step-number bg-blue-600 text-white shrink-0">2</span>
                            <p class="text-slate-600"><strong>Chrome :</strong> Menu ⋮ → "Installer Dictée Vocale..."</p>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-white rounded-lg flex items-center gap-3">
                        <i class="fa-brands fa-apple text-slate-700"></i>
                        <p class="text-xs text-slate-500">Chrome offre une meilleure expérience PWA sur Mac</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Features -->
        <div class="grid grid-cols-3 gap-4 mt-8">
            <div class="text-center text-white/80">
                <i class="fa-solid fa-bolt text-2xl mb-2"></i>
                <p class="text-sm">Rapide</p>
            </div>
            <div class="text-center text-white/80">
                <i class="fa-solid fa-lock text-2xl mb-2"></i>
                <p class="text-sm">Sécurisé</p>
            </div>
            <div class="text-center text-white/80">
                <i class="fa-solid fa-mobile-screen text-2xl mb-2"></i>
                <p class="text-sm">Multi-plateforme</p>
            </div>
        </div>

        <!-- Footer -->
        <p class="text-center text-blue-200 text-sm mt-8">
            Fonctionne sur Chrome, Edge et Safari
        </p>
    </div>

    <script>
        // Détection de la plateforme
        function detectPlatform() {
            const userAgent = navigator.userAgent.toLowerCase();
            const platform = navigator.platform.toLowerCase();

            // iOS
            if (/iphone|ipad|ipod/.test(userAgent)) {
                return { name: 'iOS (iPhone/iPad)', icon: 'fa-brands fa-apple', instructions: 'ios' };
            }

            // Android
            if (/android/.test(userAgent)) {
                return { name: 'Android', icon: 'fa-brands fa-android', instructions: 'android' };
            }

            // Mac
            if (/mac/.test(platform) || /macintosh/.test(userAgent)) {
                return { name: 'macOS', icon: 'fa-brands fa-apple', instructions: 'mac' };
            }

            // Windows
            if (/win/.test(platform) || /windows/.test(userAgent)) {
                return { name: 'Windows', icon: 'fa-brands fa-windows', instructions: 'desktop' };
            }

            // Linux
            if (/linux/.test(platform)) {
                return { name: 'Linux', icon: 'fa-brands fa-linux', instructions: 'desktop' };
            }

            // Par défaut
            return { name: 'Navigateur', icon: 'fa-solid fa-globe', instructions: 'desktop' };
        }

        // Mise à jour de l'interface
        function updateUI(platform) {
            // Badge plateforme
            document.getElementById('platform-icon').className = platform.icon + ' text-slate-600';
            document.getElementById('platform-name').textContent = platform.name;

            // Afficher la version Windows si on est sur Windows
            if (platform.name === 'Windows') {
                document.getElementById('windows-version').classList.remove('hidden');
            }

            // Afficher les bonnes instructions
            document.getElementById('instructions-' + platform.instructions).classList.remove('hidden');
        }

        // Initialisation
        const platform = detectPlatform();
        updateUI(platform);
    </script>

</body>
</html>
